<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>

// Create a question:
$('#create').on('submit', function(event) {
  const form = $(this).closest('form');
  event.preventDefault();
  $.ajax({method: 'post', url: '/questions', data: form.serialize()})
    .done()
    .fail(error => alert(error.responseText));
});

// delete a question
$(document).on('click', '.delete', function(event) {
   const form = $(this).closest('form');
   const question_id = form.attr('id')
   event.preventDefault();
   console.log(question_id);
   $.ajax({method: 'delete', url: `/questions/${question_id}`})
     .done(() => {
        console.log('done');
        form.remove()
        window.location.replace('/questions')
     })
     .fail(error => alert(error.responseText));
 });

// Update a question
$('.update').on('submit', function(event) {
    const form = $(this);
    console.log('in the update');
    const question_id = form.attr('id');
    event.preventDefault();
    $.ajax({method: 'put', url: `/questions/${question_id}`, data: form.serialize()})
        .fail(error => alert(error.responseText));
});


$(document).on('click', '.enter', function(event) {
    const form = $(this).closest('form');
    const x = $( "#options option:selected" , form ).text();

    const questionId = $(form).attr('id');
    console.log(questionId)
    console.log(x);


    event.preventDefault();
});

</script>
